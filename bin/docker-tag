#!/usr/bin/env bash
set -Eeu -o pipefail

# Add Docker tag.
# Modified 2019-11-14.

repo="acidgenomics/$1"
source_tag="${2:-bioc-release}"
dest_tag="${3:-latest}"

if [[ "$source_tag" == "$dest_tag" ]]
then
    echo "Source tag '${source_tag}' identical to dest tag '${dest_tag}'."
    exit 0
fi

docker login
docker pull "${repo}:${source_tag}"
docker tag "${repo}:${source_tag}" "${repo}:${dest_tag}"
docker push "${repo}:${dest_tag}"

